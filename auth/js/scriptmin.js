document.addEventListener("DOMContentLoaded",(()=>{"use strict";(()=>{const e=document.querySelector(".enter__form"),t=document.querySelector(".enter__btn"),r=document.querySelector(".error__inputs"),s=document.querySelector(".error__text"),o=document.querySelector("#email"),a=document.querySelector("#password");e.querySelectorAll("ul").forEach((e=>{e.style.display="none"}));const c="Неверно указан логин или пароль";class i{constructor(e,t,r){this.text=e,this.access=!1,this.email=t,this.password=r}getValidForm=()=>(this.email.value.match(/[a-zа-я0-9]/gi)?this.email.classList.remove("error"):this.email.classList.add("error"),this.password.value.match(/[a-zа-я0-9]/gi)?this.password.classList.remove("error"):this.password.classList.add("error"),this.email.value.match(/[a-zа-я0-9]/gi)&&this.password.value.match(/[a-zа-я0-9]/gi)?(this.access=!0,this.clearErrorText()):(this.access=!1,this.getErrorText()),this.access);getErrorText=()=>{s.classList.add("error__active"),r.textContent=this.text};clearErrorText=()=>{r.textContent="",s.classList.remove("error__active")}}t.addEventListener("click",(t=>(t=>{let r;t.preventDefault();const s=new i("Не все поля заполнены!",o,a),l=new FormData(e);s.getValidForm(),s.access&&fetch("/",{method:"POST",body:l}).then((e=>(200===e.status&&(r=e.url),e.text()))).then((t=>{""!==r&&t!==c?(console.log("redirect"),document.location=r):t===c&&new i(c,o,a).getErrorText(),e.reset()}))})(t)))})()}));